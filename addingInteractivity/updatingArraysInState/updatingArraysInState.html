<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="updatingArraysInState.css">
  <title>Updating Arrays in State</title>
</head>
<body>
  <!-- Div for rendering -->
  <div id="main"></div>

  <!-- Scripts for React, React DOM & Babel -->
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/jsx">
    const objectLink = "https://react.dev/learn/updating-objects-in-state"
    const immerLink = "https://react.dev/learn/updating-arrays-in-state#write-concise-update-logic-with-immer"
    
    const addingPath = "C:/Users/GAP/Desktop/DocumentationNext/addingInteractivity/updatingArraysInState/updatingArraysWithoutMutation/addingToAnArray.html"
    
    const removingPath = "C:/Users/GAP/Desktop/DocumentationNext/addingInteractivity/updatingArraysInState/updatingArraysWithoutMutation/removingFromAnArray/removingFromAnArray.html"
    
    const replacingPath = "C:/Users/GAP/Desktop/DocumentationNext/addingInteractivity/updatingArraysInState/updatingArraysWithoutMutation/replacingItemsInAnArray/replacingItemsInAnArray.html"

    const sortingPath = "C:/Users/GAP/Desktop/DocumentationNext/addingInteractivity/updatingArraysInState/updatingArraysWithoutMutation/makingOtherChangesToAnArray/makingOtherChangesToAnArray.html"

    function UpdatingArraysInState(){
      return(
        <>
          <h1>Updating Arrays in State</h1>
          <p>Arrays are mutable in JavaScrit, <b>but you should treat them as immutable whe you store them in state</b>. Just like with objects, when you want to update an array stored in state, you need to create a new one (or make a copy of an existing one), and then set state to use the new array.</p>
          <UpdatingArraysWithoutMutation/>
        </>
      )
    }

    function UpdatingArraysWithoutMutation(){
      return(
        <>
          <h2>Updating Arrays Without Mutation</h2>
          <p>In JavaScript, arrays are just another kind of object. <a href={objectLink}>Like with objects</a>, you should treat arrays in React state as read-only. This means that you shouldn't reassign items inside an array like <span className="greyBackground">arr[0] = 'bird'</span> and you also shouldn't use methods that mutate the array, such as <span className="greyBackground">push()</span> and <span className="greyBackground">pop()</span>.</p>
          <p>Instead, every time you want to update an array, you'll want to pass a new array to your state setting function. To do that, <b>you can create a new array from the original array in your state by calling its non-mutating methods</b> like <span className="greyBackground">filter()</span> and <span className="greyBackground">map()</span>. Then you can set your state to the resulting new array.</p>
          <p>Here is a reference table of common array operations. When dealing with arrays inside React state, you will need to avoid the methods in the left column, and instead prefer the metods in the right column:</p>
          <div className="table">
            <div className="cell div1"></div>
            <div className="cell div2">Adding</div>
            <div className="cell div3">Removing</div>
            <div className="cell div4">Replacing</div>
            <div className="cell div5">Sorting</div>
            <div className="cell div6"><b>Avoid</b> (mutates the array)</div>
            <div className="cell div7"><span className="greyBackground">push</span>, <span className="greyBackground">unshift</span></div>
            <div className="cell div8"><span className="greyBackground">pop</span>, <span className="greyBackground">shift</span>, <span className="greyBackground">splice</span></div>
            <div className="cell div9"><span className="greyBackground">splice</span>, <span className="greyBackground">arr[i] = ... </span><b>assignment</b></div>
            <div className="cell div10"><span className="greyBackground">reverse</span>, <span className="greyBackground">sort</span>,</div>
            <div className="cell div11"><b>Prefer</b> (returns a new array)</div>
            <div className="cell div12"><span className="greyBackground">concat</span>, <span className="greyBackground">[...arr]</span> spread syntax (<a href={addingPath}>Example</a>)</div>
            <div className="cell div13"><span className="greyBackground">filter</span>, <span className="greyBackground">slice</span> (<a href={removingPath}>Example</a>)</div>
            <div className="cell div14"><span className="greyBackground">map</span> (<a href={replacingPath}>Example</a>)</div>
            <div className="cell div15"><b>Copy the array first</b> (<a href={sortingPath}>Example</a>)</div>
          </div>
          <p>Alternatively, you can <a href={immerLink}>use Immer</a> wich lets you use methods from both columns.</p>
          <ul>
            <li><a href={addingPath}>Adding</a></li>
          </ul>
        </>
      )
    }

    ReactDOM.render(<UpdatingArraysInState/>, main)
  </script>
</body>
</html>