<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../choosingTheStateStructure/choosingStateStructure.css">
    <link rel="stylesheet" href="challenges.css">
    <title>Challenge 4 - Clear an image while it's loading</title>
</head>
<body>
    <!-- Div for rendering -->
    <div id="main"></div>

    <!-- Scripts for React, React DOM & Babel -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- General script -->
     <script type="text/jsx">
        const { useState } = React;

        function Intro(){
            return(
                <>
                    <h1>Challenge 4 - Clear an image while it's loading</h1>
                    <p>When you press "Next", the browser starts loading the next image. However, because it's displayed in the same <span className="bg-grey">{"<img>"}</span> tag, by default you would still see the previous image until the next one loads. This may be undesirable if it's important for the next to always match the image. Change it so that the moment you press "Next", the previous image immediatly clears.</p>
                </>
            )
        }

        function Solution(){
            return(
                <>
                    <h2>Solution:</h2>
                    <p>To solve this you could add the attribute <span className="bg-grey">key</span> with the adequate 'id' value in the <span className="bg-grey">{"<img>"}</span> tag. </p>
                </>
            )
        }

        function Gallery(){
            const [index, setIndex] = useState(0);
            const hasNext = index < images.length - 1;

            function handleClick(){
                if(hasNext){
                    setIndex(index + 1);
                } else {
                    setIndex(0);
                }
            }

            let image = images[index];
            
            return(
                <>
                    <div>
                        <button className="btn" onClick={handleClick}>
                            Next
                        </button>
                        <h3>Image {index + 1} of {images.length}</h3>
                        <img key={image.id} src={image.src}/>
                        <p>{image.place}</p>
                    </div>
                </>
            );
        }

        function App(){
            return(
                <>
                    <Intro/>
                    <Solution/>
                    <Gallery/>
                </>
            )
        }
        ReactDOM.render(<App/>, main)
     </script>
     <script src="challenge4.js"></script>
</body>
</html>